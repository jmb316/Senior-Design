<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Chapter Events</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/modern-business.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        
        <!-- Custom Calendar Responsive -->
        <link href="css/calendar.css" rel="stylesheet" type="text/css">
  <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body onload="handleClientLoad()">
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">App name</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/chapterevents">Chapter Events</a>
                    </li>
                    <li>
                        <a href="/roster">Roster</a>
                    </li>
                    <li>
                        <a href="/food">Food</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Profile <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="/profile">Profile</a>
                            </li>
                            <li>
                                <a href="/logout">Log Out</a>
                            </li>
                            <li>
                                
                                </ul>
                    </li>
                    
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    <!-- Page Content -->
    <div class="container">

        <!-- Page Heading/Breadcrumbs -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header"> Chapter Events
                </h1>
                <ol class="breadcrumb">
                    <li><a href="/">Home</a>
                    </li>
                    <li class="active">Chapter Events</li>
                </ol>
            </div>
        </div>
        <!-- /.row -->
        
        <div class="container" style="margin-top:20px;">
            <div class="row">
                <div class="col-xs-5">
                    <h3 class="text-center">Upcoming Events</h3>
                    <div class="well" style="max-height: 300px;overflow: auto;">
                        <ul class="list-group checked-list-box">
                            <li class="list-group-item" data-style="button">Movie <input type="button" value="Sign Up"></li>
                            <li class="list-group-item" data-style="button">Home<input type="button" value="Sign Up"></li>
                            <li class="list-group-item" data-style="button">Work<input type="button" value="Sign Up"></li>
                            <li class="list-group-item" data-style="button">Ice Cream<input type="button" value="Sign Up"></li>
                            <li class="list-group-item" data-style="button">Park<input type="button" value="Sign Up"></li>
                        </ul>
                    </div>
                </div>
        
      
<!-- Responsive iFrame -->
<div class="responsive-iframe-container">

<iframe src="https://calendar.google.com/calendar/embed?src=ijlsc8eund133ltpkvuh3323bs%40group.calendar.google.com&ctz=America/New_York" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
</div>
        <hr>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <!-- /.row -->
        
        <div class="container" style="margin-top:20px;">
            <div class="row">
                <div class="col-xs-6">
                  
                    <script src="javascripts/format-google-calendar.js"></script>

                    <div class="panel panel-danger" id="result-panel">
                        <div class="panel-heading">
                               <button id="authorize-button" class="btn btn-primary">Authorize</button>
                           <h3 class="panel-title" id="result-title">Application Not Authorized</h3>
                        </div><!-- .panel-heading -->
                        <div class="panel-body">
                            <p>Insert Event into Public Calendar&hellip;</p>
                            <div id="event-response"></div>
                            <pre id="output"></pre>
                        </div><!-- .panel-body -->
                    </div><!-- .panel -->                </div>
                
                
                <!-- Responsive iFrame -->
                <div class="responsive-iframe-container">
                    
                    <iframe src="https://calendar.google.com/calendar/embed?src=ftbioqlsgdfcp0sltprr7r7nqg%40group.calendar.google.com&ctz=America/New_York" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>
                </div>
                <hr>
        
        
        
        
        <script type="text/javascript">
           /* // date variables
            var now = new Date();
            today = now.toISOString();
            
            var twoHoursLater = new Date(now.getTime() + (2*1000*60*60));
            twoHoursLater = twoHoursLater.toISOString();

            // google api console clientID and apiKey (https://code.google.com/apis/console/#project:568391772772)
            var clientId = '316615911187-g6qp9ghdv970gcnl4c2g6j90koov8chc.apps.googleusercontent.com';
            var apiKey = 'AIzaSyCnjBi_r7BqHgKIY37bH5bzdzddoXAdYjs';
            
            // enter the scope of current project (this API must be turned on in the google console)
            var scopes = 'https://www.googleapis.com/auth/calendar';
            
            
            // Oauth2 functions
            function handleClientLoad() {
                alert("handle client load");
                gapi.client.setApiKey(apiKey);
                window.setTimeout(checkAuth,1);
            }
        
        function checkAuth() {
                   alert("checkauth chap events");
            gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
        }
        
        // show/hide the 'authorize' button, depending on application state
        function handleAuthResult(authResult) {
            var authorizeButton = document.getElementById('authorize-button');
            var resultPanel		= document.getElementById('result-panel');
            var resultTitle		= document.getElementById('result-title');
            
            if (authResult && !authResult.error) {
                authorizeButton.style.visibility = 'hidden';			// if authorized, hide button
                resultPanel.className = resultPanel.className.replace( /(?:^|\s)panel-danger(?!\S)/g , '' )	// remove red class
                resultPanel.className += ' panel-success';				// add green class
                resultTitle.innerHTML = 'Application Authorized'		// display 'authorized' text
                makeApiCall();											// call the api if authorization passed
            } else {													// otherwise, show button
                authorizeButton.style.visibility = 'visible';
                resultPanel.className += ' panel-danger';				// make panel red
                authorizeButton.onclick = handleAuthClick;				// setup function to handle button click
            }
        }
        
        // function triggered when user authorizes app
        function handleAuthClick(event) {
            gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
            return false;
        }
        
        // setup event details
        var resource = {
            "summary": "Sample Event " + Math.floor((Math.random() * 10) + 1),
            "start": {
                "dateTime": today
            },
            "end": {
                "dateTime": twoHoursLater
            }
        };
        
        // function load the calendar api and make the api call
        function makeApiCall() {
            alert("make API call");
            gapi.client.load('calendar', 'v3', function() {					// load the calendar api (version 3)
                             var request = gapi.client.calendar.events.insert({
                                                                              'calendarId':		'ftbioqlsgdfcp0sltprr7r7nqg@group.calendar.google.com',	// calendar ID
                                                                              "resource":			resource							// pass event details with api call
                                                                              });
                             
                                // handle the response from our api call
                             //adding an event
                             // request.execute(function(resp) {
                             // if(resp.status=='confirmed') {
                             // document.getElementById('event-response').innerHTML = "Event created successfully. //View it <a href='" + resp.htmlLink + "'>online here</a>.";
                            //  } else {
                            //  document.getElementById('event-response').innerHTML = "There was a problem. Reload //page and try again.";
                            //  }
                            //  console.log(resp);
                            //  });
                             
                             loadCalendarApi();
                             
                             
                             
                             
                             
                             });
        }
        
        
        
        
        
        
        function loadCalendarApi() {
            gapi.client.load('calendar', 'v3', listUpcomingEvents);
        }
        
        
         // Print the summary and start datetime/date of the next ten events in
         // the authorized user's calendar. If no events are found an
        //appropriate message is printed.
         
        function listUpcomingEvents() {
            var request = gapi.client.calendar.events.list({
                                                           'calendarId': 'ftbioqlsgdfcp0sltprr7r7nqg@group.calendar.google.com',
                                                           'timeMin': (new Date()).toISOString(),
                                                           'showDeleted': false,
                                                           'singleEvents': true,
                                                           'maxResults': 10,
                                                           'orderBy': 'startTime'
                                                           });
                                                           
                                                           request.execute(function(resp) {
                                                                           var events = resp.items;
                                                                           appendPre('Upcoming events:');
                                                                           
                                                                           if (events.length > 0) {
                                                                           for (i = 0; i < events.length; i++) {
                                                                           var event = events[i];
                                                                           var when = event.start.dateTime;
                                                                           if (!when) {
                                                                           when = event.start.date;
                                                                           }
                                                                           var dateStart = getDateInfo(event.start.dateTime || event.start.date),
                                                                           dateEnd = getDateInfo(event.end.dateTime || event.end.date);
                                                                           
                                                                           var timeStart = getTimeInfo(event.start.dateTime || event.start.date),
                                                                           timeEnd = getTimeInfo(event.end.dateTime || event.end.date);
                                                                           
                                                                           console.log("datestart: "+dateStart.toString());
                                                                           dateFormatted = getFormattedDate(dateStart, dateEnd);
                                                                           
                                                                           appendPre(event.summary + ': ' + dateFormatted +" "+timeStart+" - "+timeEnd);
                                                                           //alert(event.summary + ' (' + when + ')')
                                                                           }
                                                                           } else {
                                                                           appendPre('No upcoming events found.');
                                                                           //alert('No upcoming events found.');
                                                                           }
                                                                           
                                                                           });
        }
        
        
        // Append a pre element to the body containing the given message
         // as its text node.
        
         // @param {string} message Text to be placed in pre element.
         
        function appendPre(message) {
            var pre = document.getElementById('output');
            var textContent = document.createTextNode(message + '\n');
            pre.appendChild(textContent);
        }
        */
</script>


        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Your Website 2015</p>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->
    <!-- Calendar JS-->

    <!-- jQuery -->
    <script src="javascripts/jquery.min.js"></script>
    <script src="javascripts/bootstrap.min.js"></script>
  <!--  <script src="javascripts/calendar.js"></script>-->
    <!--<script src="javascripts/calendarcheckbox.js"></script>-->
    <script src="javascripts/chapterevents.js"></script>


</body>

</html>
